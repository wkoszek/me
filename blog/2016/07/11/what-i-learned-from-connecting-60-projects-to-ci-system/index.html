<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=author content="Wojciech Adam Koszek"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name="p:domain_verify" content=35dedfd4f697e6e974b0ae6631ca7351 /> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/1406-fonts.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/debug.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/code.css"> <script src="https://code.jquery.com/jquery-git.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-8027537-3', 'auto');
  ga('send', 'pageview');
</script> <script>
	(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
	(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
	e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
	})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
	_st('install','_i_CdLX9xwxixHZtjxHu','2.0.0');
</script> <link rel=icon type="image/png" href="/img/favicon.ico"> <title>What I learned from connecting 60 projects to CI system</title> <meta name=description content="My lessons learned after I went through my GitHub and connected whatever I could to Travis-Ci, Circle CI and AppVeyor to get it built and tested. "/> <meta property="og:title" content="What I learned from connecting 60 projects to CI system"/> <meta property="og:description" content="My lessons learned after I went through my GitHub and connected whatever I could to Travis-Ci, Circle CI and AppVeyor to get it built and tested. "/> <meta property="og:image" content="http://2.bp.blogspot.com/-44jlMkK-3Fg/UULyQyB35fI/AAAAAAAABLM/YH9PDQ4cROw/s1600/infinity_black.png"/> <meta name="twitter:card" content=summary_large_image> <meta name="twitter:site" content="@wkoszek"/> <meta name="twitter:creator" content="@wkoszek"/> <meta name="twitter:title" content="What I learned from connecting 60 projects to CI system"/> <meta name="twitter:description" content="My lessons learned after I went through my GitHub and connected whatever I could to Travis-Ci, Circle CI and AppVeyor to get it built and tested. "/> <meta name="twitter:image" content="http://2.bp.blogspot.com/-44jlMkK-3Fg/UULyQyB35fI/AAAAAAAABLM/YH9PDQ4cROw/s1600/infinity_black.png"/> <meta property="og:type" content=article /> <meta property="article:author" content="https://www.koszek.com/about"/> <meta property="article:publisher" content="https://www.koszek.com/"/> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> </head> <body> <div class=container> <div class="row noprint"> <div class="col-md-3 logo"> <a href="/">Wojciech Adam Koszek</a> </div> <div class="col-md-9 links hidden-sm hidden-xs"> <a class=in id=blog href="/">Blog</a> <a class=in id=reading href="/reading/">Reading</a> <a class=in id=papers href="/papers/">Papers</a> <a class=in id=about href="/about/">About me</a> <input class=st-default-search-input> </div> </div> <div class="row noprint"> <hr/> </div> <div class="row hidden-md hidden-lg links noprint"> <div class=col-xs-4> <br> <a class=in href="/">Blog</a> </div> <div class=col-xs-4> <br> <a class=in href="/reading/">Reading</a> </div> <div class=col-xs-4> <br> </div> </div> <div class="row hidden-md hidden-lg links noprint"> <div class=col-xs-4> <br> <a class=in href="/papers/">Papers</a> </div> <div class=col-xs-4> <br> <a class=in href="/about/">About</a> </div> <div class=col-xs-4> <br> <a class="hidden-lg hidden-md" href="#notes">Notes</a> </div> </div> <div class="row hidden-md hidden-lg links text-center noprint"> <br> <input class=st-default-search-input> </div> <div class=row> <div class="col-md-2 leftpanel hidden-xs hidden-sm"> </div> <div class="col-md-7 content"> <article> <h1 class=title>What I learned from connecting 60 projects to CI system</h1> <i>by Wojciech Adam Koszek</i> &nbsp;&nbsp;&sdot;&nbsp;&nbsp; <i>Jul 11, 2016</i> &nbsp;&nbsp;&sdot;&nbsp;&nbsp; <i>Menlo Park, CA</i> <br/> <br/> <b>My lessons learned after I went through my GitHub and connected whatever I could to Travis-Ci, Circle CI and AppVeyor to get it built and tested. </b> <br/> <hr class=noprint /> <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f9a67fb0188b069" async=async></script> <div class=addthis_sharing_toolbox></div> <hr class=noprint /> <div class=article_body> <p>Several months ago I started to wonder what makes me check out software sitting at <a href="http://www.GitHub.com">GitHub</a> and try it out. Some projects I was more willing to work with, and some I simply skipped without thinking about it much. It seemed like a habit which I’ve developed over the years. But why do I have this feeling of carelessly ignoring some projects over another?</p> <p>The characteristics of projects I’m drawn into are pretty simple: good, clear documentation, good top-level directory structure, presence of some “dotfiles” and … green badge, signalizing <a href="https://en.wikipedia.org/wiki/Continuous_integration">Continuous Integration (CI)</a> system is actually verifying this software is at least building fine.</p> <p>Once I’ve reached this conclusion, I set myself on a path for bringing all my essential repositories to the Continuous Integration (CI) system. First, to help people with my software, and second, to learn more about CI systems.</p> <p>I had many repositories, big and small, old and new, some of which weren’t in the best state. Below you have my thoughts and conclusions from the project.</p> <h2 id=continuous-integration-101>Continuous Integration 101</h2> <p>Quick introduction: CI system is a remote computer wired to your repository. When the repository changes, it’ll pick a change and execute the steps which user normally would have taken to build your software. By being a ‘virtual user’ the CI system finds issues with reproducibility which customers of your software would normally find. And it relieves you from “boring but necessary” kind of work. By establishing a process and culture around CI system, you’re more likely to deliver software with a decent quality.</p> <h2 id=projects-target>Project’s target</h2> <p>So the idea I had was to basically let people know what <a href="https://github.com/wkoszek/">my repos</a> are all about by bringing documentation. And then showing that code isn’t total crap by building it in a reproducible way.</p> <p>So my algorithm for fixing my code was this:</p> <pre class="highlight plaintext"><code>for each repo:
	regardless of what (no exceptions)
		put README.md in place
	if it's super trivial and I don't care:
		skip
	contigure CI system and see a green badge
</code></pre> <h2 id=continuous-integration-solutions>Continuous Integration solutions?</h2> <p>I’ve worked with 3 CI systems:</p> <ul> <li><a href="https://travis-ci.org/">Travis CI</a>,</li> <li><a href="https://circleci.com/">Circle CI</a></li> <li><a href="https://www.appveyor.com/">AppVeyor</a>.</li> </ul> <p>First of all, it’s pretty eye-opening that people in these companies contribute their compute time to the open-source community. I’m not affiliated with any of these companies, yet I send them big kudos for doing so. So far on delivering my open source projects I have paid literally $0 (zero dollars) for their services. It is great companies contribute that way to the open-source and I hope that through this article we will have more developers using their products and improving quality of software.</p> <h3 id=how-they-differ>How they differ?</h3> <p>Travis-Ci and Circle-Ci are direct competitors and their offering is similar. I have found Travis slightly easier to configure and its UI nicer. Circle-Ci feels slightly faster however. This is not 1-to-1 comparison, and I feel like the best way is to try yourself. Travis has a big advantage that was important to me: they offer free OSX support. Since I <a href="https://github.com/wkoszek/cs193p">had</a> <a href="https://github.com/wkoszek/macb">some</a> projects for OSX, it was important to me. CircleCi and AppVeyor have this nice feature of letting you to login on the worker machine for debugging, something I wish Travis had. This is very important for debugging (read on).</p> <p>AppVeyor however is pretty simple to choose: it’s a dominant Windows-based CI system. Because <a href="https://github.com/wkoszek/flviz">FLViz</a> and <a href="https://github.com/wkoszek/kmnsim">KMNSIM</a> both worked on Windows, I wanted to see them building fine too.</p> <h2 id=lessons-learned>Lessons learned</h2> <p><strong>Being a code piper isn’t always fun</strong></p> <p>Debugging CI system can be boring and tedious. Reward is there of course, but you’ll have to arm yourself in patience and prepare for debugging remote system which you have no direct access to.</p> <p>Most of failures will be of sort: “Works for me, but doesn’t work on remote system”, which is precisely a point of having CI system.</p> <blockquote> <p>Whatever problem you rule out at this stage, your customers won’t hit.</p> </blockquote> <p><strong>Debugging through a key-hole</strong></p> <p>Remote systems behave differently and can be configured in unfamiliar way. I tried to ease this issue by showing some CI settings through <a href="https://github.com/wkoszek/ci-env">CI-env</a>. By clicking individual badges of each system you can see its remote settings, which you can encompass in your scripts later.</p> <p><strong>Trial and error</strong></p> <p>Travis-CI offers a <a href="https://docs.travis-ci.com/user/common-build-problems/">Docker Image</a> for debugging. You may find it helpful for debugging your flow. For me it’s often a cycle of:</p> <ul> <li>push a commit</li> <li>see CI system failing</li> <li>change something and push a fix</li> <li>see CI system failing</li> <li>etc..</li> </ul> <p><strong>Great flexibility</strong></p> <p>For sure I’ve done with CI systems more than I’d have normally do. For example <a href="https://github.com/wkoszek/book-programming-ruby/blob/master/.travis.yml">testing my Ruby versions</a> for your scripts is easy. So is <a href="https://github.com/wkoszek/mini_printf/blob/master/.travis.yml">building on 2 operating systems</a></p> <p>Things I don’t want to heat my Mac with, such as <a href="https://travis-ci.org/wkoszek/dockerfiles">building Docker images</a> I also do through CI system.</p> <p><strong>Keeping things simple</strong></p> <p>What I see in some projects I <a href="https://github.com/wkoszek/middleman-blog-similar/blob/master/.travis.yml">contributed to</a> is that we put a lot of stuff in CI configuration. I think it’s a mistake because users can’t actually execute the CI steps from the same configuration file. So I suggest you wrap most of <a href="https://github.com/wkoszek/dockerfiles/blob/master/build.sh">your steps in a script</a> or <a href="https://github.com/wkoszek/me/blob/master/makefile">a makefile</a> and then run it from a <a href="https://github.com/wkoszek/me/blob/master/.travis.yml">simple</a> <a href="https://github.com/wkoszek/dockerfiles/blob/master/.travis.yml">config</a></p> <h2 id=summary>Summary</h2> <p>It will take time to push the quality of your code higher, but the benefits are great. Right now each time I make a change to my projects, I can see immediate checks on whether I broke something or not, which is very nice. I urge you to pick 2-3 of your active projects and do the same.</p> <p><strong>Let me know if this article was helpful and whether you’d find a screencast documenting topics in this article useful</strong></p> </div> </article> <div class="row noprint"> <br> <div class="col-md-6 text-left"> </div> <div class="col-md-6 text-right"> </div> </div> <div class=noprint> <hr> <h3 id=mailing-list>Subscribe for updates</h3> <p> Once a month I send updates on the new content and hints for software engineers. <div id=mc_embed_signup class=row> <form action="//koszek.us3.list-manage.com/subscribe/post?u=0cfe70aa4cdf848b2adbd70c6&amp;id=bc454f0778" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll class=col-md-12> <input type=email value="" name=EMAIL class="required email" id=mce-EMAIL placeholder="Enter E-mail here"> <div id=mce-responses class=clear> <div class=response id=mce-error-response style="display:none"></div> <div class=response id=mce-success-response style="display:none"></div> </div> <div style="position: absolute; left: -5000px;"><input name=b_0cfe70aa4cdf848b2adbd70c6_bc454f0778 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button width="100%"></div> </div> </form> </div> </p> <hr> <b>Liked it? Share it!</b> <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f9a67fb0188b069" async=async></script> <div class=addthis_sharing_toolbox></div> <hr> <p><br/> <strong>About the author:</strong> I’m Wojciech Adam Koszek. I like software, business and design. Poland native. In Bay Area since 2010.   <a href="/about/">More about me…</a></p> <hr> <div id=disqus_thread></div> <script>

var disqus_config = function () {
this.page.url = document.location.href.split('?')[0].split('#')[0];
this.page.identifier = this.page.url;
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//koszek.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> <div class=col-md-1> </div> <div class="col-md-2 rightpanel noprint"> <br><h4>Mailing list</h4> <a href="#mailing-list">Subscribe</a> <br><h4>RSS feed</h4> <a href="http://www.koszek.com/feed.xml">RSS</a> <h4>Contact</h4> <a href="mailto:wojciech@koszek.com">E-mail</a><br> <a href="https://twitter.com/wkoszek/">Twitter</a><br> <a href="https://www.linkedin.com/in/wkoszek/">LinkedIn</a><br> <a href="https://github.com/wkoszek/">Github</a><br> <h4>Tags</h4> <span class=tag> <a href="/blog/tags/software-engineering">software engineering</a> </span> <br> <span class=tag> <a href="/blog/tags/tools">tools</a> </span> <br> <span class=tag> <a href="/blog/tags/entrepreneurship">entrepreneurship</a> </span> <br> <span class=tag> <a href="/blog/tags/productivity">productivity</a> </span> <br> </div> </div> <div class="row noprint"> <div class="col-md-12 footer"> <i>&copy;&nbsp;2012&dash;2017 Wojciech Adam Koszek (<a href="https://www.twitter.com/wkoszek/">@wkoszek</a>)</i> <br> Visits so far: <script>
var sc_project=10468040; 
var sc_invisible=0; 
var sc_security="b542d462"; 
var sc_text=2; 
var scJsHost = (("https:" == document.location.protocol) ?  "https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+ "statcounter.com/counter/counter.js'></"+"script>");
</script> <noscript> <div class=statcounter> <a title="free web stats" href="https://statcounter.com/free-web-stats/" target=_blank> <img class=statcounter src="https://c.statcounter.com/10468040/0/b542d462/0/" alt="free web stats"/></a> </div> </noscript> </div> </div> </div> <script>
        var active_page_elem = document.getElementById('active_page_name')
        var active_page_name = (active_page_elem != null ? active_page_elem.textContent : "blog");
        var active_page_link = document.getElementById(active_page_name);
        active_page_link.className = "ac";
    </script> </body> </html>