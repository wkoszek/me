<!doctype html> <html lang=en> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=author content="Wojciech Adam Koszek"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name="p:domain_verify" content=35dedfd4f697e6e974b0ae6631ca7351 /> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/1406-fonts.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/debug.css"> <link rel=stylesheet media=none onload="if(media!='all')media='all'" href="/css/code.css"> <script src="https://code.jquery.com/jquery-git.min.js"></script> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-8027537-3', 'auto');
  ga('send', 'pageview');
</script> <script>
	(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
	(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
	e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
	})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
	_st('install','_i_CdLX9xwxixHZtjxHu','2.0.0');
</script> <link rel=icon type="image/png" href="/img/favicon.ico"> <title>Funny mistakes and The Toyota Way</title> <meta name=description content="Some of my random thoughts and insights after reading "The Toyota Way" "/> <meta property="og:title" content="Funny mistakes and The Toyota Way"/> <meta property="og:description" content="Some of my random thoughts and insights after reading "The Toyota Way" "/> <meta name="twitter:card" content=summary_large_image> <meta name="twitter:site" content="@wkoszek"/> <meta name="twitter:creator" content="@wkoszek"/> <meta name="twitter:title" content="Funny mistakes and The Toyota Way"/> <meta name="twitter:description" content="Some of my random thoughts and insights after reading "The Toyota Way" "/> <meta property="og:type" content=article /> <meta property="article:author" content="https://www.koszek.com/about"/> <meta property="article:publisher" content="https://www.koszek.com/"/> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> </head> <body> <div class=container> <div class="row noprint"> <div class="col-md-3 logo"> <a href="/">Wojciech Adam Koszek</a> </div> <div class="col-md-9 links hidden-sm hidden-xs"> <a class=in id=blog href="/">Blog</a> <a class=in id=reading href="/reading/">Reading</a> <a class=in id=papers href="/papers/">Papers</a> <a class=in id=about href="/about/">About me</a> <input class=st-default-search-input> </div> </div> <div class="row noprint"> <hr/> </div> <div class="row hidden-md hidden-lg links noprint"> <div class=col-xs-4> <br> <a class=in href="/">Blog</a> </div> <div class=col-xs-4> <br> <a class=in href="/reading/">Reading</a> </div> <div class=col-xs-4> <br> </div> </div> <div class="row hidden-md hidden-lg links noprint"> <div class=col-xs-4> <br> <a class=in href="/papers/">Papers</a> </div> <div class=col-xs-4> <br> <a class=in href="/about/">About</a> </div> <div class=col-xs-4> <br> <a class="hidden-lg hidden-md" href="#notes">Notes</a> </div> </div> <div class="row hidden-md hidden-lg links text-center noprint"> <br> <input class=st-default-search-input> </div> <div class=row> <div class="col-md-2 leftpanel hidden-xs hidden-sm"> </div> <div class="col-md-7 content"> <article> <h1 class=title>Funny mistakes and The Toyota Way</h1> <i>by Wojciech Adam Koszek</i> &nbsp;&nbsp;&sdot;&nbsp;&nbsp; <i>May 14, 2012</i> &nbsp;&nbsp;&sdot;&nbsp;&nbsp; <i>East Palo Alto, CA</i> <br/> <br/> <b>Some of my random thoughts and insights after reading "The Toyota Way" </b> <br/> <hr class=noprint /> <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f9a67fb0188b069" async=async></script> <div class=addthis_sharing_toolbox></div> <hr class=noprint /> <div class=article_body> <p>This article has a strange mix of UNIX and methodology and mental problems of post’s author, related with inspirations from the The Toyota Way. I read The Toyota Way, since I tried to find something related to couple of things I’m interested in: (1) how companies work (2) Japanese culture (3) computers. (3) I involved myself. The way I think about stuff in “The Toyota Way” is that I’ll not only get to know how Toyota solves problems, but I’ll bring experiences from the book to my problem solving, mental toolset and I’ll transmute them to my daily job with UNIX systems.</p> <p><a rel=nofollow href="http://www.amazon.com/gp/product/0071392319/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0071392319&amp;linkCode=as2&amp;tag=wkoszek-20&amp;linkId=QKE4PQSNGFQJYT3C"><img border=0 src="http://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=0071392319&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=US&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=wkoszek-20"/></a><img src="http://ir-na.amazon-adsystem.com/e/ir?t=wkoszek-20&amp;l=as2&amp;o=1&amp;a=0071392319" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"/></p> <p>It is very funny how sometimes I get trapped with simple stuff.</p> <pre class="highlight plaintext"><code>===== ~/.cshrc =====

alias   commbak   tar cjf ~/backup/comments-`date '+%Y%m%d-%s'`.tar.bz2 /home/wojciec/comments
</code></pre> <p>(challenge)</p> <p>Things often get overlooked, since, yes, we all do mistakes. I do too. But it’s entertaining when a person who knows what this stuff is all about gets trapped in his own mistakes. Each time I see a mistake in a script or a piece of code, I try to:</p> <ol> <li> <p>solve it properly: you have enough time to prepare a correct patch/fix to your scripts which correctly solve the problem. By correctly I mean: they preserve abstractions and proper code’s conventions (you use some conventions, don’t you?) and basically, are consistent with whatever you have there.</p> </li> <li> <p>solve it: you don’t have enough time, you must generate Excel/HTML based report that SIMPLY MUST BE DONE BEFORE 3pm meeting and no matter how obscure, obfuscated and ugly method you use, it doesn’t really matter, since the results simply must be present by 3pm. So basically think “GM production” line – no matter what, we keep process going (this is not really true for my day job and we only start “flow” once we get it right and we produce only as much data as we’re able to analyze, but not more).</p> </li> </ol> <p>If you haven’t ever done (2), it means you work for an excellent company, and I’d love to know what company that is. You’re not a real hack0r.</p> <p>So anyway – 2nd point is only a necessity and I’m not too ashamed, since I think it’s just a part of daily job. Once again: this is preferred choice only when you’re pushed to finish stuff on time and you know upfront you won’t make it.</p> <pre class="highlight plaintext"><code>if ($g_fn_hack) {
	# HACK!!
	# Filename generation routine creates a _base_name_.log of a
	# file and we register _base_name_ to prevent us from
	# overwriting files accidentally. But since I didn't
	# encompass in advance that we'll be repeating experiments
	# with different parameters, we need to bring a bit of
	# randomness to filenames, to be sure all files' names are
	# unique
	$fn += sprintf "%.0f", rand() * 1000;
}
</code></pre> <p>So this is an example of necessarily the smartest thing, but since the surrounding code wasn’t trivial, this is the fastest way I could solve the problem. Randomness almost always helps – if you need ugly and incredibly dark solution that, of course, will produce darker result, use randomness. Now: this is not as evil as you may think. I just produce files with known “base name” (before extension), but add some unique factor. So not too bad.</p> <p>I trapped myself not on generation, but parsing this stuff. So instead of:</p> <pre class="highlight plaintext"><code>ls -la
</code></pre> <p>giving me a decent, nicely sorted result, I have to use:</p> <pre class="highlight plaintext"><code>ls -lar
</code></pre> <p>disaster to figure out which files got created first (1st experiment run) and later plot HTML report based on that.</p> <p>So for this particular case (and 2 others, not mentioned here) I created a bug database case with “5 why’s” – notes how to not let it happen next time (<strong><em>Finding the root cause, instead of solving/preventing unwanted effect</em></strong>) and I’ll get back to this ASAP. I know, I know: according to The Toyota Way <strong><em>problems should be solved right away</em></strong>. But … oh well. I haven’t yet mastered this. For now I can tell you it’s pretty darn hard to convince everybody around to fix problems correctly in this very moment, so fixing is postponed sometimes. Especially if results must be available the very next day.</p> <p>(Solving problems RIGHT AWAY isn’t always possible in my case, since my “cell” – the box of responsibilities – isn’t shared with anybody, so it often involves lots of other stuff and I have to prioritize work; solving existing problems isn’t always PRIO.1 job – I know, I know. Against The Toyota Way, but still - I’ve just finished 1/2 of the book)</p> <p>Lets get back to automation. I solve lots of stuff by automating stuff and proper error reporting. I use cron(1) extensively, but lots of stuff is still done semi-automatically. Getting the process (getting the “flow”, in Toyota’s nomenclature) is painful first, but later it works pretty flawlessly.</p> <pre class="highlight plaintext"><code>***You don't run everything from cron. You suck man, you REALLY SUCK***
</code></pre> <p>Well…</p> <p>Stuff which I still happen to prefer to run by hand is defined by “Mental willingness to watch important process happening interactively due to the strong responsibility and need of knowing that it <strong>just worked fine</strong>”. It’s not that I can stuff everything from cron(1), because I can. I don’t do it, since I don’t feel too comfortable.</p> <p>Not being comfortable involves:</p> <ol> <li> <p>Removing stuff</p> </li> <li> <p>Working as a different user (shared account) and typing commands which lie in the history, which you happen to type by accident etc..</p> </li> <li> <p>Moving large batches of important files</p> </li> <li> <p>Copying stuff from one place to another</p> </li> <li> <p>Managing processes</p> </li> </ol> <p>(0) deserves a different section I think, thus it’s (0) here.</p> <p>(1) I try to stay away from. For me shared accounts are a bad idea. So I just try to work as “me”, and later copy results of commands/processing. (2) and (3) somehow fall into the same bucket. For me this is a standard:</p> <pre class="highlight plaintext"><code>/bin/ls -1
</code></pre> <p>Then everything follows:</p> <pre class="highlight plaintext"><code>/bin/ls -1 | xargs -n 1
</code></pre> <p>Every step I check just in case. So normally you write a script, but since now I’m a smart a*s in the middle of a book “The Toyota Way”:</p> <p>I can say I’m getting “visual inspection” done on every step. And I polish process till it’s right. It gives me more experience and knowledge what I can expect in the next stages too. So finally it becomes:</p> <pre class="highlight plaintext"><code>/bin/ls -1 | xargs -n 1 -i# echo mv # #.old
</code></pre> <p>Which even after many intermediate steps isn’t doing anything, but once you type it, you’ll understand how helpful it is.</p> <pre class="highlight plaintext"><code>"Visual Control so no Problems are Hidden"
</code></pre> <p>So I have a habit of making lots of aliases. Aliases tend to be completely dark and you <strong>simply can’t understand them</strong> unless you’re me:</p> <pre class="highlight plaintext"><code>alias alljobs `bjobs | grep -v JOB | cut -d " " -f 1 | xargs -n 1 echo CMD`
</code></pre> <p>What does this useless command do?</p> <p>Huh?</p> <p>Well, not too much. It just prints a line for each LSF job scheduled to run at the certain time. Why to do it in a such a complex way? Well, if you manage relatively important processes, which JUST CAN’T CRASH, you must be certain to do exactly what you want.</p> <p>So the way I work is that I create myself a intermediate commands that automate lots of boring stuff (like the above: printing all running jobs) and have them generate something, that can be trivially modified:</p> <pre class="highlight plaintext"><code>alljobs | sed 's/CMD/bstop/g'
</code></pre> <p>and suddenly you have something to feed your copy&amp;paste buffer with. Once you inspect the output of a command, you can feed your shell with it too:</p> <pre class="highlight plaintext"><code>alljobs | sed 's/CMD/bstop/g' | sh
</code></pre> <p>Still with me? Asleep? Yet another quiz to wake you up:</p> <pre class="highlight plaintext"><code>sh script1.sh script2.sh
</code></pre> <p>What does this do? Hint: it is against the logic.</p> <p>Yet, I stick to aliases. For example, “cd” is the most aliased command by me. If I have to type:</p> <pre class="highlight plaintext"><code>cd /long/path/name/to/dir
</code></pre> <p>twice, it almost always lands in my:</p> <pre class="highlight plaintext"><code>~/.aliases
</code></pre> <p>and earns it’s only line there. Once again, it can get messy, since if you do:</p> <pre class="highlight plaintext"><code>cdt
</code></pre> <p>especially when you’re projecting your session, people don’t really know where are you and what are you trying to accomplish.</p> <p>Something useful at the end of this boring post:</p> <pre class="highlight plaintext"><code>alias	fp	'/bin/ls -1 | xargs -n 1 readlink -f'
</code></pre> <p>I really can’t imagine working without shortcuts.</p> <p>So methodology works pretty well: do automatic stuff first, get it right, but leave the very last decision to the “human operator” (you) when possible; inspect stuff visually; double check random lines of sequences of commands which you’re going to run; if multiple (&gt;1000) lines are involved, redirect output to a file and edit it, cross check with your assumptions. The decide what to do.</p> <p>Believe me, this methodology saved me couple of times, since some critical problems (e.g.: lack of disk space, lack of RAM, machine rebooting due to cable problem in an expensive RAID shelf your company is using) happen, but happen rarely, and due to the Murphy’s Laws, if your script has a potential to breaking in the situation that <strong><em>CAN’T</em></strong> happen typically, it’ll do it; especially if there’s potential of causing massive destruction and losing data which have been generated for the last week.</p> <p>Be careful!</p> </div> </article> <div class="row noprint"> <br> <div class="col-md-6 text-left"> </div> <div class="col-md-6 text-right"> </div> </div> <div class=noprint> <hr> <h3 id=mailing-list>Subscribe for updates</h3> <p> Once a month I send updates on the new content and hints for software engineers. <div id=mc_embed_signup class=row> <form action="//koszek.us3.list-manage.com/subscribe/post?u=0cfe70aa4cdf848b2adbd70c6&amp;id=bc454f0778" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate> <div id=mc_embed_signup_scroll class=col-md-12> <input type=email value="" name=EMAIL class="required email" id=mce-EMAIL placeholder="Enter E-mail here"> <div id=mce-responses class=clear> <div class=response id=mce-error-response style="display:none"></div> <div class=response id=mce-success-response style="display:none"></div> </div> <div style="position: absolute; left: -5000px;"><input name=b_0cfe70aa4cdf848b2adbd70c6_bc454f0778 tabindex=-1 value=""></div> <div class=clear><input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button width="100%"></div> </div> </form> </div> </p> <hr> <b>Liked it? Share it!</b> <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f9a67fb0188b069" async=async></script> <div class=addthis_sharing_toolbox></div> <hr> <p><br/> <strong>About the author:</strong> I’m Wojciech Adam Koszek. I like software, business and design. Poland native. In Bay Area since 2010.   <a href="/about/">More about me…</a></p> <hr> <div id=disqus_thread></div> <script>

var disqus_config = function () {
this.page.url = document.location.href.split('?')[0].split('#')[0];
this.page.identifier = this.page.url;
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//koszek.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> <div class=col-md-1> </div> <div class="col-md-2 rightpanel noprint"> <br><h4>Mailing list</h4> <a href="#mailing-list">Subscribe</a> <br><h4>RSS feed</h4> <a href="http://www.koszek.com/feed.xml">RSS</a> <h4>Contact</h4> <a href="mailto:wojciech@koszek.com">E-mail</a><br> <a href="https://twitter.com/wkoszek/">Twitter</a><br> <a href="https://www.linkedin.com/in/wkoszek/">LinkedIn</a><br> <a href="https://github.com/wkoszek/">Github</a><br> <h4>Tags</h4> <span class=tag> <a href="/blog/tags/software-engineering">software engineering</a> </span> <br> <span class=tag> <a href="/blog/tags/tools">tools</a> </span> <br> <span class=tag> <a href="/blog/tags/entrepreneurship">entrepreneurship</a> </span> <br> <span class=tag> <a href="/blog/tags/productivity">productivity</a> </span> <br> </div> </div> <div class="row noprint"> <div class="col-md-12 footer"> <i>&copy;&nbsp;2012&dash;2017 Wojciech Adam Koszek (<a href="https://www.twitter.com/wkoszek/">@wkoszek</a>)</i> <br> Visits so far: <script>
var sc_project=10468040; 
var sc_invisible=0; 
var sc_security="b542d462"; 
var sc_text=2; 
var scJsHost = (("https:" == document.location.protocol) ?  "https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" + scJsHost+ "statcounter.com/counter/counter.js'></"+"script>");
</script> <noscript> <div class=statcounter> <a title="free web stats" href="https://statcounter.com/free-web-stats/" target=_blank> <img class=statcounter src="https://c.statcounter.com/10468040/0/b542d462/0/" alt="free web stats"/></a> </div> </noscript> </div> </div> </div> <script>
        var active_page_elem = document.getElementById('active_page_name')
        var active_page_name = (active_page_elem != null ? active_page_elem.textContent : "blog");
        var active_page_link = document.getElementById(active_page_name);
        active_page_link.className = "ac";
    </script> </body> </html>