<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
		<meta name="author" content="Wojciech Adam Koszek">
		<meta name="description" content="Wojciech Adam Koszek website and blog">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

		<link rel="stylesheet" href="/css/normalize.css">
		<link rel="stylesheet" href="/css/skeleton.css">
		<link rel="stylesheet" href="/css/debug.css">
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

		<link rel="icon" type="image/png" href="images/favicon.png">
		<title>Blog Title - Cross-compile GNU assembler for MIPS</title>
		<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
	</head>
	<body>
	<div class="container">
		<div class="row">
			<div id="debug">
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
				<div class="one column">&nbsp;</div>
			</div>
		</div>

		<div class="row">
			<div class="three columns logo">
				<a href="/">Wojciech Adam Koszek</a>
			</div>
			<div class="eight columns links">
				<a class="in" href="/">Writing</a>
				<a class="in" href="/reading/">Reading</a>
				<a class="in" href="/speaking/">Speaking</a>
				<a class="in" href="/software/">Software</a>
				<a class="in" href="/about/">About me</a>
			</div>
		</div>
		<div class="row">
			<div class="twelve columns">
				<br>
				<br>
			</div>
		</div>

		<div class="row"><!-- center -->
			<div class="three columns leftpanel">
				<div class="ads">
				</div>

				<b>Contact</b><br>
				<a href="mailto:wojciech@koszek.com"><i class="fa fa-envelope-o"></i>&nbsp;&nbsp;wojciech@koszek.com</a>
				<br>

				<a href="http://www.twitter.com/wkoszek/"><i class="fa fa-twitter"></i>&nbsp;&nbsp;@wkoszek</a>
				<br>

				<a href="http://www.linkedin.com/in/wkoszek/"><i class="fa fa-linkedin"></i>&nbsp;&nbsp;LinkedIn</a>
				<br>

				<a href="http://www.github.com/wkoszek/"><i class="fa fa-github"></i>&nbsp;&nbsp;Github</a>
				<br>

				<br>
				<b>Tags</b>
				<br>
					<a href="/blog/tags/books/">books (2)</a><br>
			</div>
			<div class="seven columns content">
				<p>Just a short note, not to have to walk through the Web each time I
want to get some strange opcodes generated.</p>

<p>Today "strange" means "MIPS". "Nobody uses MIPS", you say? Well â€“ I still believe MIPS
is the cleanest RISC architecture available today. So yes, I want to have
something translate:</p>

<pre><code>_start:
	addi	$2, $2, 123
	addi	$3, $3, 321
	add	$4, $2, $3

	addi	$5, $5, 1
	addi	$6, $6, 2
	or	$7, $5, $6

	addi	$8, $8, 0xf
	addi	$9, $9, 0x3
	and	$10, $8, $9
</code></pre>

<p>To:</p>

<pre><code>0x2042007b
0x20630141
0x00432020
0x20a50001
0x20c60002
0x00a63825
0x2108000f
0x21290003
0x01095024
</code></pre>

<p>For me. So first let me present steps for building the GNU assembler for
MIPS. Steps:</p>

<pre><code>wget ftp://sourceware.org/pub/binutils/snapshots/binutils-2.22.52.tar.bz2
tar xjf binutils-2.22.52.tar.bz2
cd binutils-2.22.52
mkdir build
../configure --target=mips --prefix=${HOME}/bin/mips
make
make install
set path=($path ${HOME}/bin/mips/bin)
</code></pre>

<p>Now that I have MIPS assembler, I have created a simple <code>makefile</code> for
myself, which translates opcodes from generated object file to hexadecimal
opcodes:</p>

<pre><code>imem.hex: imem.s
	mips-as -o imem.o imem.s
	mips-objcopy -O binary imem.o imem.bin
	mips-objdump -d imem.o &gt; imem.dump
	sed '1,7d' imem.dump | awk '{ print "0x"$$2 }' &gt; imem.hex
</code></pre>

<p>Thanks to these several steps, I have a simple infrastructure to play with
MIPS opcodes.
@@@RIGHT@@@</p>

<iframe src="http://rcm.amazon.com/e/cm?lt1=_blank&amp;bc1=FFFFFF&amp;IS2=1&amp;npa=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=FF0000&amp;t=wojcadamkoszh-20&amp;o=1&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=ss_til&amp;asins=0120884216" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
<iframe src="http://rcm.amazon.com/e/cm?lt1=_blank&amp;bc1=FFFFFF&amp;IS2=1&amp;npa=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=FF0000&amp;t=wojcadamkoszh-20&amp;o=1&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=ss_til&amp;asins=0131420445" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

<iframe src="http://rcm.amazon.com/e/cm?lt1=_blank&amp;bc1=FFFFFF&amp;IS2=1&amp;npa=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=FF0000&amp;t=wojcadamkoszh-20&amp;o=1&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=ss_til&amp;asins=0123744938" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

<iframe src="http://rcm.amazon.com/e/cm?lt1=_blank&amp;bc1=FFFFFF&amp;IS2=1&amp;npa=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=FF0C00&amp;t=wojcadamkoszh-20&amp;o=1&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=ss_til&amp;asins=0123747503" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

			</div>

			<div class="two columns">
			</div>
		</div><!-- content -->

		<div class="row footer">
			<div class="twelve columns">
			<center>
				&copy; 2015 Wojciech Adam Koszek
			</center>
			</div>
		</div>
	</div><!--container-->
</body>
</html>
